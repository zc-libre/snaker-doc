(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{574:function(a,t,s){"use strict";s.r(t);var e=s(9),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h3",{attrs:{id:"时限控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#时限控制"}},[a._v("#")]),a._v(" 时限控制")]),a._v(" "),s("p",[a._v("时限控制常用于流程平台中的超时处理（提醒、自动执行等）、以及任务监控的查询统计等功能。")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("依赖包")])]),a._v(" "),s("li",[s("code",[a._v("配置")])]),a._v(" "),s("li",[s("code",[a._v("实现提醒接口")])])]),a._v(" "),s("h3",{attrs:{id:"依赖包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#依赖包"}},[a._v("#")]),a._v(" 依赖包")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("snaker默认支持quartz定时器调度框架，只需要依赖snaker-quartz的包即可。\n")])])]),s("h3",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),s("p",[a._v("在"),s("code",[a._v("snaker.xml")]),a._v("中配置时限控制的拦截器、定时调度的实现类")]),a._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("bean")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("org.snaker.engine.impl.SchedulerInterceptor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("bean")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("org.snaker.engine.scheduling.quartz.QuartzScheduler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("/>")])]),a._v("\n")])])]),s("p",[a._v("如果使用其它定时调度框架，需要实现"),s("code",[a._v("IScheduler")]),a._v("接口，并替换"),s("code",[a._v("QuartzScheduler")]),a._v("类配置")]),a._v(" "),s("p",[a._v("以上两步已经完成了时限的配置工作，下面就可以针对提醒、超时自动执行做自定义扩展了。")]),a._v(" "),s("h3",{attrs:{id:"超时提醒"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#超时提醒"}},[a._v("#")]),a._v(" 超时提醒")]),a._v(" "),s("ul",[s("li",[a._v("编写自定义的提醒类，实现"),s("code",[a._v("IReminder")]),a._v("接口。并配置到"),s("code",[a._v("snaker.xml")]),a._v("中即可。")]),a._v(" "),s("li",[a._v("任务节点配置超时提醒属性："),s("code",[a._v("reminderTime")]),a._v("、"),s("code",[a._v("reminderRepeat")]),a._v("。")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("reminderTime是一个变量，表示提醒开始时间，当你调用api时需要传递此变量值，值的类型为date。\nreminderRepeat是一个数字，表示重复提醒间隔时间，以分钟为单位\n")])])]),s("ul",[s("li",[a._v("默认提醒一次就结束，如果希望提醒多次，可通过"),s("code",[a._v("snaker.properties")]),a._v("中配置"),s("code",[a._v("scheduler.repeat")]),a._v("属性，该值是个数字，表示提醒次数。")]),a._v(" "),s("li",[a._v("节假日配置")])]),a._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#是否启用节假日，默认为false")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("scheduler.useCalendar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true/false")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#节日配置，格式为yyyy-MM-dd,...")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("scheduler.holidays")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("2014-12-26,2014-12-27")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#工作日设置，格式为1,2,3...7，表示周一至周日")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("scheduler.weeks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("1,2,3,4,5")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#工作时间设置，格式为8:00-18:00")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("scheduler.workTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("8:00-18:00")]),a._v("\n")])])]),s("h3",{attrs:{id:"超时自动完成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#超时自动完成"}},[a._v("#")]),a._v(" 超时自动完成")]),a._v(" "),s("ul",[s("li",[a._v("任务节点配置超时处理属性："),s("code",[a._v("expireTime")]),a._v("、"),s("code",[a._v("autoExecute")]),a._v("、"),s("code",[a._v("callback")])])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("expireTime是一个变量，表示期望完成时间，当你调用api时需要传递此变量值，值的类型为date。\nautoExecute的值为Y/N,表示超时是否自动执行\ncallback是一个字符串，表示自动执行的回调类路径配置\n")])])]),s("ul",[s("li",[a._v("编写回调类")])]),a._v(" "),s("p",[a._v("通过实现"),s("code",[a._v("JobCallback")]),a._v("接口")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("snaker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("scheduling"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("JobCallback")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);