(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{577:function(a,t,s){"use strict";s.r(t);var e=s(9),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h3",{attrs:{id:"流程变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流程变量"}},[a._v("#")]),a._v(" 流程变量")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("数据存储")])]),a._v(" "),s("li",[s("code",[a._v("设计方法")])]),a._v(" "),s("li",[s("code",[a._v("Snaker的流程变量")])]),a._v(" "),s("li",[s("code",[a._v("变量数据获取")])])]),a._v(" "),s("p",[a._v("流程引擎在设计的过程中，需要考虑数据的分类存储")]),a._v(" "),s("h3",{attrs:{id:"数据存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据存储"}},[a._v("#")]),a._v(" 数据存储")]),a._v(" "),s("p",[s("strong",[a._v("业务数据")])]),a._v(" "),s("p",[a._v("一般保存在业务表中")]),a._v(" "),s("p",[s("strong",[a._v("流程数据")])]),a._v(" "),s("p",[a._v("一般保存在流程引擎的表中，如"),s("code",[a._v("wf_process")]),a._v(" "),s("code",[a._v("wf_order")]),a._v(" "),s("code",[a._v("wf_task")]),a._v("等")]),a._v(" "),s("p",[s("strong",[a._v("关联数据")])]),a._v(" "),s("p",[a._v("流程变量保存的就是关联数据")]),a._v(" "),s("h3",{attrs:{id:"设计方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设计方法"}},[a._v("#")]),a._v(" 设计方法")]),a._v(" "),s("p",[s("strong",[a._v("变量表")])]),a._v(" "),s("p",[a._v("目前主流的流程引擎如Jbpm、Activiti都常用变量表方式，其优点是支持丰富的变量类型，变量值无长度限制，支持查询。缺点是很多使用者过于依赖变量表，将大部分业务数据保存在变量表中，数据过多时性能急剧下降。")]),a._v(" "),s("p",[s("strong",[a._v("变量字段")])]),a._v(" "),s("p",[a._v("变量字段方式适用于中小型流程平台，只支持少量字段的存储，强制用户适用业务表保存业务数据，流程变量仅保存少量的关联数据。变量数据随实例、任务记录一次查询即可获得。但是缺点也很明显，不支持关联数据的查询，如果需要查询，只能将关联数据在业务表重复保存一份。")]),a._v(" "),s("h3",{attrs:{id:"snaker的流程变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#snaker的流程变量"}},[a._v("#")]),a._v(" snaker的流程变量")]),a._v(" "),s("p",[a._v("snaker使用变量字段保存关联数据的方式，并支持在运行时动态添加全局变量数据")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("全局变量\n全局变量的作用域是流程实例从启动至结束的所有过程\n局部变量\n局部变量的作用域是任务执行的单个过程\n")])])]),s("p",[a._v("动态添加全局变量数据，可通过addVariable方法完成。")]),a._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[a._v("engine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("addVariable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" orderId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),s("h3",{attrs:{id:"变量数据获取"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#变量数据获取"}},[a._v("#")]),a._v(" 变量数据获取")]),a._v(" "),s("p",[a._v("变量数据取可通过实例对象"),s("code",[a._v("Order")]),a._v(" "),s("code",[a._v("HistoryOrder")]),a._v("、任务对象"),s("code",[a._v("Task")]),a._v(" "),s("code",[a._v("HistoryTask")]),a._v("的"),s("code",[a._v("getVariableMap()")]),a._v("方法获取")])])}),[],!1,null,null,null);t.default=r.exports}}]);